<div>
  <h1>Tu Carrito</h1>

  {{#if cart.products.length}}
    <div style="display: flex; flex-wrap: wrap; gap: 20px;">
      {{#each cart.products}}
        <div style="border: 1px solid #ccc; border-radius: 8px; padding: 16px; width: 250px; text-align: center;">
          <h3>{{this.product.title}}</h3>
          <p><strong>Código:</strong> {{this.product.code}}</p>
          <p><strong>Precio:</strong> 
            $<span class="price" data-price="{{this.product.price}}">{{this.product.price}}</span>
          </p>

          <p>
            <strong>Cantidad:</strong> 
            <button type="button" class="decrease-btn" data-id="{{this.product._id}}" data-cart-id="{{../cart._id}}">➖</button>
            <span class="quantity-value" data-quantity="{{this.quantity}}">{{this.quantity}}</span>
            <button type="button" class="increase-btn" data-id="{{this.product._id}}" data-cart-id="{{../cart._id}}">➕</button>
          </p>

          <button class="delete-btn" data-id="{{this.product._id}}" data-cart-id="{{../cart._id}}">
            Eliminar del carrito
          </button>
        </div>
      {{/each}}
    </div>

    <h3 id="cart-total">Total del carrito: ${{cartTotal}}</h3>

    <form method="POST" action="/api/carts/{{cart._id}}/purchase">
      <button type="submit">Finalizar compra</button>
    </form>
  {{else}}
    <p>Tu carrito está vacío.</p>
  {{/if}}

  <br>
  <a href="/users/purchase/products">Volver a productos</a>
</div>

<script src="/js/carts.js"></script>